generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Block {
  blockNumber  BigInt     @unique @id
  hash         String     @unique
  parentHash   String
  timestamp    DateTime
  gasUsed      BigInt
  gasLimit     BigInt
  baseFeeWei   BigInt?
  transactions Transaction[]

  @@index([blockNumber])
  @@map("blocks")
}

model Transaction {
  id           String    @id @default(uuid())
  blockNumber  BigInt
  txHash       String    @unique
  from         String
  to           String?
  valueWei     BigInt
  gasUsed      BigInt
  gasPriceWei  BigInt?
  nonce        BigInt

  block        Block     @relation(fields: [blockNumber], references: [blockNumber], onDelete: Cascade)

  @@index([blockNumber])
  @@index([from])
  @@index([to])
  @@map("transactions")
}